# Linux. Command
### В данном проекте описана установка OC Linux версии Ubuntu 20.04 с виртуальной системой в рамках сервера. Также будут рассмотрены базовые команды работы с Linux.
## Part 1. Установка ОС.
### - Установи Ubuntu 20.04 Server LTS без графического интерфейса. 
### - Узнай версию Ubuntu, выполнив команду `cat /etc/issue`
### - Вставь скриншот с выводом команды.

## Выполнение Part 1
### Скачивание [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
### Скачивание [Ubuntu Server](https://releases.ubuntu.com/20.04/)
### [Установка](InstallingLinux.md) Ubuntu 20.04 LTS (Focal Fossa) 

### Проверка версии Ubuntu
### (Файл /etc/issue является обычным текстовым файлом, который предоставляет информацию о LTS системе)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA1.png)

## Part 2. Создание пользователя.
### - Создай пользователя, отличного от созданного при установке. Пользователь должен быть добавлен в группу adm.
### - Вставь скриншот вызова команды для создания пользователя.
### - Новый пользователь должен быть в выводе команды `cat /etc/passwd`
### - Вставь скриншот с выводом команды.

## Выполнение Part 2
### Добавление пользователя командой `useradd`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA2.png)
### Командой `cat /etc/passwd` можем увидеть пользователя, который только что был создан
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA3.png)

## Part 3. Настройка сети ОС.
### - Задай название машины вида user-1.
### - Установи временную зону, соответствующую твоему текущему местоположению.
### - Выведи названия сетевых интерфейсов с помощью консольной команды (В отчёте дай объяснение наличию интерфейса lo).
### - Используя консольную команду, получи ip адрес устройства, на котором ты работаешь, от DHCP сервера (В отчёте дай расшифровку DHCP).
### - Определи и выведи на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).
### - Задай статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (используй публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).
### - Перезагрузи виртуальную машину. Убедись, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.
### - Успешно пропингуй удаленные хосты 1.1.1.1 и ya.ru и вставь в отчёт скрин с выводом команды. В выводе команды должна быть фраза «0% packet loss».

## Выполнение Part 3
### hostnamectl – команда дает информацию о системе. (Версия OC, версия ядра, архитектура, разрядность).
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA4.png)
### Команда изменения имени машины - `hostnamectl set-hostname "name"`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA5.png)
### Установка временной зоны - `timedatectl set-timezone "my_timezone"`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA6.png)
### Команда ip - это сетевой инструмент Linux для системных и сетевых администраторов, который используется для настройки сетевых интерфейсов
### К флагам (объектам) данной команды чаще используют такие варианты:
### 1. link - используется для отображения и изменения сетевых интерфейсов
### 2. address - используется для отображения и изменения адресов протокола (IP, IPv6)
### 3. route - используется для отображения и изменения таблицы маршрутизации
### 4. neigh - используется для отображения и управления соседними объектами (таблица ARP)

### Команда `ip link show` используется для просмотра сетевых интерфейсов (это не единственный способ - существует ifconfig)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA7.png)
> lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине.
> С этим интерфейсом всегда связан адрес 127.0.0.1. У него есть dns-имя – localhost

### Получение ip адреса устройства от DHCP сервера
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA8.png)
> DHCP - протокол для предоставления компьютерам сетевой информации. В большинстве случаев, используется системными администраторами для автоматической настройки сети — IP-адреса, маски, шлюза и DNS.
> Устройство (например, маршрутизатор он же роутер) или компьютер, который раздает настройки, называется DHCP-сервером. Принимающая сторона использует DHCP-клиент. Последний по умолчанию включен в Windows.

### Получение gw (внутренний ip-адрес шлюза)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA9.png)

### Получение ip (внешний ip-адрес шлюза)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA10.png)

### [Изменение настроек ip, gw, dns](ChangeParameters.md)

## Part 4. Обновление ОС
### - Обнови системные пакеты до последней на момент выполнения задания версии.
### - После обновления системных пакетов, если ввести команду обновления повторно, должно появиться сообщение, что обновления отсутствуют.

## Выполнение Part 4
### Командой `apt list --upgradable` проверяем наличие доступных обновлений
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA14.png)
### В случае, если обновления есть, можно воспользоваться командой `sudo apt upgrade` для обновы всех пакетов.

## Part 5. Использование команды sudo.
### - Разреши пользователю, созданному в Part 2, выполнять команду sudo.
### - В отчёте объясни истинное назначение команды sudo (про то, что это слово - «волшебное», писать не стоит);
### - Поменяй hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo);
### - Вставь скрин с изменённым hostname в отчёт.

## Выполнение Part 5
### Добавление пользователю newUser право sudo
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA15.png)
> Команда usermod изменяет системные файлы учётных записей согласно переданным в командной строке параметрам.
> Флаги -a -G идут всегда вместе. Это означает добавление пользователя в дополнительную группу
> (a - append, G - Group)
> [Хороший ресурс](https://manpages.ubuntu.com/manpages/xenial/ru/man8/usermod.8.html)
### Sudo - Команда sudo может использоваться для выполнения пользователем какой-либо команды, требующей права суперпользователя (root), то есть получение прав root для выполнения какой-либо команды на время её выполнения. Перед выполнением команды sudo запрашивает пароль пользователя

### С помощью данной команды можно посмотреть пользователей, которые владеют правом исп. sudo
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA16.png)

### Изменим hostname с помощью юзера из Part2 
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B03.png)

## Part 6. Установка и настройка службы времени.
### Настрой службу автоматической синхронизации времени:
### - Выведи время часового пояса, в котором ты сейчас находишься.
### - Вывод следующей команды должен содержать NTPSynchronized=yes:
### timedatectl show
### - Вставь скрины с корректным временем и выводом команды в отчёт.

## Выполнение Part 6
### С помощью команды `timedatectl` и `timedatectl show` можно узнать о временных настройках
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B04.png)

## Part 7
### - Установи текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)

### 1. Используя каждый из трех выбранных редакторов, создай файл test_X.txt, где X -- название редактора, в котором создан файл. Напиши в нём свой никнейм, закрой файл с сохранением изменений.
### В отчёт вставь скриншоты:
### - Из каждого редактора с содержимым файла перед закрытием;
### - В отчёте укажи, что сделал для выхода с сохранением изменений.

### 2. Используя каждый из трех выбранных редакторов, открой файл на редактирование, отредактируй файл, заменив никнейм на строку «21 School 21», закрой файл без сохранения изменений.
### В отчёт вставь скриншоты:
### - Из каждого редактора с содержимым файла после редактирования;
### - В отчёте укажи, что сделал для выхода без сохранения изменений.

### 3. Используя каждый из трех выбранных редакторов, отредактируй файл ещё раз (по аналогии с предыдущим пунктом), а затем освой функции поиска по содержимому файла (слово) и замены слова на любое другое.
### В отчёт вставь скриншоты:
### - Из каждого редактора с результатами поиска слова;
### - Из каждого редактора с командами, введёнными для замены слова на другое.

## Выполнение Part 7
### Для установки я выбрал 3 редактора (VIM, NANO, JOE)

### **VIM**:
### 1. Режим вставки - `CTRL + I`, выход с сохранением - `:wq`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA18.png)
### 2. Выход без сохранения осуществляется командой - `:q!`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA21.png)
### 3. Поиск чего-либо происходит с помощью - `:/word`, Замена с помощью команды
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA24.png)
### 3. Замена с помощью команды - `:s/word/for_word`
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B05.png)

### **NANO**:
### 1. Выход с сохранением - `CTRL + x` и далее нажать нужно Y
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA19.png)
### 2.  Выход без сохранения - `CTRL + x` и далее нажать нужно N
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA22.png)
### 3. Поиск чего-либо - `CTRL + w`, далее вводим слово и `ENTER`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA26.png)
### 3. Замена с помощью команды `CTRL + \`, далее вводим слова и `ENTER`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA25.png)

### **JOE**:
### 1. Выход с сохранением - `CTRL + K` и далее нажать нужно x
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA20.png)
### 2. Выход без сохранением - `CTRL + с`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA23.png)
### 3. Поиск чего-либо - `CTRL + KF`, далее вводим слово и `I -> ENTER`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA27.png)
### 3. Замена с помощью команды `CTRL + KF`, далее вводим слово, которое нужно заменить и `ENTER`
###   Далее вводим букву R и следующее слово и `ENTER`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA28.png)

## Part 8. Установка и базовая настройка сервиса SSHD.
### - Установи службу SSHd.
### - Добавь автостарт службы при загрузке системы.
### - Перенастрой службу SSHd на порт 2022.
### - Используя команду ps, покажи наличие процесса sshd. Для этого к команде нужно подобрать ключи.
* ### В отчёте объясни значение команды и каждого ключа в ней.
### - Перезагрузи систему.
### - В отчёте опиши, что сделал для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
* ### Вывод команды netstat -tan должен содержать tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN (если команды netstat нет, то ее нужно установить)
* ### Скрин с выводом команды вставь в отчёт.
* ### В отчёте объясни значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

## Выполнение Part 8
### Установка и запуск службы:
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA29.png)
### Чтобы исправить порт на 2022, нужно текстовым редактором изменить config файл /etc/ssh/sshd_config
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA30.png)
### Используя команду ps по совместительству и grep, можно увидеть, что процесс ssh есть
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA31.png)
### Суть работы команды ps в том, что она собирает данные из специальной директории /etc/proc, в которой находятся сведения о процессах и представляет их в удобной форме для восприятия.
### [Флаги команды ps](https://1cloud.ru/help/security/ispolzovanie-komandy-ps-dlya-prosmotra-protsessov-linux):
* ### -A, -e, (a) - выбрать все процессы
* ### -a - выбрать все процессы, кроме фоновых;
* ### -d, (g) - выбрать все процессы, даже фоновые, кроме процессов сессий;
* ### -N - выбрать все процессы кроме указанных;
* ### -С - выбирать процессы по имени команды;
* ### -G - выбрать процессы по ID группы;
* ### -p, (p) - выбрать процессы PID;
* ### --ppid - выбрать процессы по PID родительского процесса;
* ### -s - выбрать процессы по ID сессии;
* ### -t, (t) - выбрать процессы по tty;
* ### -u, (U) - выбрать процессы пользователя.
### Перезапуск службы и проверка статуса
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B06.png)

### Вывод команды netstat -tan
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA32.png)

> Команда netstat, входящая в стандартный набор сетевых инструментов UNIX, отображает различную network–related информацию, такую как сетевые подключения, статистику интерфейсов, таблицы маршрутизации, masquerade, multicast, и т.п.

>-t 	Отображает TCP-соединения. 

>-a	Показывать состояние всех сокетов; обычно сокеты, используемые серверными процессами, не показываются.

>-n	Показывать сетевые адреса как числа. netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.

## Part 9. Установка и использование утилит top, htop
### Установи и запусти утилиты top и htop.
### По выводу команды top определи и напиши в отчёте:
* ### uptime
* ### количество авторизованных пользователей
* ### общую загрузку системы
* ### общее количество процессов
* ### загрузку cpu
* ### загрузку памяти
* ### pid процесса занимающего больше всего памяти
* ### pid процесса, занимающего больше всего процессорного времени
### В отчёт вставь скрин с выводом команды htop:
* ### отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
* ### отфильтрованному для процесса sshd
* ### с процессом syslog, найденным, используя поиск
* ### с добавленным выводом hostname, clock и uptime

## Выполнение Part 9
### [Полезное видео](https://www.youtube.com/watch?v=21yn_RAtPA8)
### С помощью команды **top** можно наблюдать:
### - uptime (16:16:37)
### - Кол-во авторизованных пользователей (1 user)
### - Средняя загруженность процессора (load average: 0,01, 0,04, 0,01)
### - Общее кол-во процессов (Tasks: 104 total)
### Загрузка CPU (0,0 us, 0,2 sy, 0,0 ni, 99,8 id, 0,0 wa, 0,0 hi, 0,0 si, 0,0 st)
### Загрузка памяти (MiB Mem: 1971,4 total, 934,0 free, 162,5 used, 874,9 buff/cache)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA33.png)
### PID процесса, занимающего больше всего памяти с помощью команды `top -o %MEM`
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B07.png)
### PID процесса, занимающего больше всего процессорного времени с помощью команды `top -o %CPU`
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA40.png)
### Команда **htop**:
### Отсортированная информация по PID:
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA41.png)
### Отсортированная информация по PERCENT_CPU:
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA42.png)
### Отсортированная информация по PERCENT_MEM:
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B08.png)
### Отсортированная информация по TIME:
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B09.png)
### С помощью `\` можно найти процесс sshd
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA45.png)
### Нахождение процесса syslog (f3 + syslog + enter)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA46.png)
### Добавленным вывод hostname, clock и uptime (f2 - setup и выбираем колонки)
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B010.png)

## Part 10. Использование утилиты fdisk
### Запусти команду fdisk -l.
### В отчёте напиши название жесткого диска, его размер и количество секторов, а также размер swap.

## Выполнение Part 10
### Команда sudo fdisk -l
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA47.png)
### Название диска, его размер, кол-во секторов и его swap
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA48.png)

## Part 11. Использование утилиты df
### Запусти команду df.
### В отчёте напиши для корневого раздела (/):
* ### размер раздела
* ### размер занятого пространства
* ### размер свободного пространства
* ### процент использования
### Определи и напиши в отчёт единицу измерения в выводе.
### Запусти команду df -Th.
### В отчёте напиши для корневого раздела (/):
* ### размер раздела
* ### размер занятого пространства
* ### размер свободного пространства
* ### процент использования
### Определи и напиши в отчёт тип файловой системы для раздела.

## Выполнение Part 11
### Размер раздела, занятого и свободного пространства и процент использования c помощью команды df -h
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA48.png)
### Размер раздела, занятого и свободного пространства и процент использования c помощью команды df -Th
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA53.png)

## Part 12. Использование утилиты du
### Запусти команду du
### Выведи размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
### Выведи размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

## Выполнение Part 12
### Размер папок /home, /var, /var/log с помощью команды du
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA57.png)
### Размер каждого вложенного элемента папки /var/log
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA58.png)

## Part 13. Установка и использование утилиты ncdu
### Установи утилиту ncdu (sudo apt install ncdu)
### Выведи размер папок /home, /var, /var/log

## Выполнение Part 13
### Размер папки /home
![Alt text](../materials/%D0%92%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B011.png)
### Размер папки /var
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA61.png)
### Размер папки /var/log
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA60.png)

## Part 14. Работа с системными журналами
### Открой для просмотра:
### - /var/log/dmesg
### - /var/log/syslog
### - /var/log/auth.log

## Выполнение Part 14
### Просмотр /var/log/dmesg (команда `less dmesg -> shist +g`):
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA62.png)
### Просмотр /var/log/syslog (команда `less /var/log/syslog -> shift + g`):
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA63.png)
### Просмотр /var/log/auth.log (команда `less /var/log/auth.log -> shift + g`):
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA64.png)
### Последняя успешная авторизация 
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA65.png)
### Перезагрузка SSHd (sudo systemctl restart ssh)
### Информация о перезагрузке в auth.log (sudo tail auth.log)
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA66.png)

## Part 15. Использование планировщика заданий CRON
### Используя планировщик заданий, запусти команду uptime через каждые 2 минуты.
### Найди в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении;
### Выведи на экран список текущих заданий для CRON;
### Вставь в отчёт скрины со строчками о выполнении и списком текущих задач.
### Удали все задания из планировщика заданий.

## Выполнение Part 15
### `Crontab -e` – создание и редактирование скрипта по правилам crontab
### Прописываем скрипт и сохраняем результат работы в crontab_log_file.txt
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA67.png)
### В syslog можно увидеть запись каждые 2 минуты в наш лог файл
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA68.png)
### Наблюдаем наш лог файл
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA69.png)
### Удаляем и просмотр задач crontab
![Alt text](../materials/%D0%A0%D0%B8%D1%81%D1%83%D0%BD%D0%BE%D0%BA70.png)
